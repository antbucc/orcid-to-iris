{"ast":null,"code":"export async function fetchPublications(orcidId) {\n  if (!orcidId || !/^\\d{4}-\\d{4}-\\d{4}-\\d{4}$/.test(orcidId)) {\n    throw new Error(\"Invalid ORCID ID format.\");\n  }\n  const worksUrl = `https://pub.orcid.org/v3.0/${orcidId}/works`;\n  const headers = {\n    Accept: \"application/json\"\n  };\n  try {\n    const response = await fetch(worksUrl, {\n      headers\n    });\n    if (!response.ok) {\n      throw new Error(`ORCID API request failed with status ${response.status}`);\n    }\n    const data = await response.json();\n    const publications = [];\n    for (const group of data.group || []) {\n      const summary = group[\"work-summary\"][0];\n      const workId = summary[\"put-code\"];\n      if (workId) {\n        const workDetailsUrl = `https://pub.orcid.org/v3.0/${orcidId}/work/${workId}`;\n        const detailsResponse = await fetch(workDetailsUrl, {\n          headers\n        });\n        if (detailsResponse.ok) {\n          var _workDetails$contribu, _workDetails$contribu2, _workDetails$title, _workDetails$title$ti, _ids, _ids$externalId, _ids$externalId$find, _workDetails$journal, _workDetails$publicat, _workDetails$publicat2, _workDetails$keywords, _workDetails$keywords2;\n          const workDetails = await detailsResponse.json();\n          const authors = ((_workDetails$contribu = workDetails.contributors) === null || _workDetails$contribu === void 0 ? void 0 : (_workDetails$contribu2 = _workDetails$contribu.contributor) === null || _workDetails$contribu2 === void 0 ? void 0 : _workDetails$contribu2.map(contributor => {\n            var _contributor$creditN;\n            return (_contributor$creditN = contributor[\"credit-name\"]) === null || _contributor$creditN === void 0 ? void 0 : _contributor$creditN.value;\n          }).join(\", \")) || \"No Authors\";\n          publications.push({\n            title: ((_workDetails$title = workDetails.title) === null || _workDetails$title === void 0 ? void 0 : (_workDetails$title$ti = _workDetails$title.title) === null || _workDetails$title$ti === void 0 ? void 0 : _workDetails$title$ti.value) || \"No Title\",\n            authors,\n            doi: workDetails.external - ((_ids = ids) === null || _ids === void 0 ? void 0 : (_ids$externalId = _ids[\"external-id\"]) === null || _ids$externalId === void 0 ? void 0 : (_ids$externalId$find = _ids$externalId.find(id => id[\"external-id-type\"] === \"doi\")) === null || _ids$externalId$find === void 0 ? void 0 : _ids$externalId$find[\"external-id-value\"]) || \"\",\n            journal: ((_workDetails$journal = workDetails[\"journal-title\"]) === null || _workDetails$journal === void 0 ? void 0 : _workDetails$journal.value) || \"No Journal\",\n            year: ((_workDetails$publicat = workDetails[\"publication-date\"]) === null || _workDetails$publicat === void 0 ? void 0 : (_workDetails$publicat2 = _workDetails$publicat.year) === null || _workDetails$publicat2 === void 0 ? void 0 : _workDetails$publicat2.value) || \"No Year\",\n            volume: workDetails[\"volume\"] || \"\",\n            issue: workDetails[\"issue\"] || \"\",\n            pages: workDetails[\"page-range\"] || \"\",\n            abstract: workDetails[\"short-description\"] || \"\",\n            publisher: workDetails[\"publisher\"] || \"\",\n            keywords: ((_workDetails$keywords = workDetails[\"keywords\"]) === null || _workDetails$keywords === void 0 ? void 0 : (_workDetails$keywords2 = _workDetails$keywords.keyword) === null || _workDetails$keywords2 === void 0 ? void 0 : _workDetails$keywords2.map(kw => kw.value).join(\", \")) || \"\"\n          });\n        } else {\n          console.warn(`Failed to fetch details for work ID: ${workId}`);\n        }\n      }\n    }\n    return publications;\n  } catch (error) {\n    console.error(\"Error fetching publications:\", error.message);\n    throw new Error(\"Failed to fetch publications. Please check the ORCID ID.\");\n  }\n}","map":{"version":3,"names":["fetchPublications","orcidId","test","Error","worksUrl","headers","Accept","response","fetch","ok","status","data","json","publications","group","summary","workId","workDetailsUrl","detailsResponse","_workDetails$contribu","_workDetails$contribu2","_workDetails$title","_workDetails$title$ti","_ids","_ids$externalId","_ids$externalId$find","_workDetails$journal","_workDetails$publicat","_workDetails$publicat2","_workDetails$keywords","_workDetails$keywords2","workDetails","authors","contributors","contributor","map","_contributor$creditN","value","join","push","title","doi","external","ids","find","id","journal","year","volume","issue","pages","abstract","publisher","keywords","keyword","kw","console","warn","error","message"],"sources":["/Users/bucchiarone/Library/Mobile Documents/com~apple~CloudDocs/Documents/Documents - Antonioâ€™s MacBook Pro/Projects/orcid-to-iris/orcid-to-iris/orcid-to-iris/src/services/orcidService.js"],"sourcesContent":["export async function fetchPublications(orcidId) {\n    if (!orcidId || !/^\\d{4}-\\d{4}-\\d{4}-\\d{4}$/.test(orcidId)) {\n      throw new Error(\"Invalid ORCID ID format.\");\n    }\n  \n    const worksUrl = `https://pub.orcid.org/v3.0/${orcidId}/works`;\n    const headers = { Accept: \"application/json\" };\n  \n    try {\n      const response = await fetch(worksUrl, { headers });\n  \n      if (!response.ok) {\n        throw new Error(`ORCID API request failed with status ${response.status}`);\n      }\n  \n      const data = await response.json();\n      const publications = [];\n  \n      for (const group of data.group || []) {\n        const summary = group[\"work-summary\"][0];\n        const workId = summary[\"put-code\"];\n  \n        if (workId) {\n          const workDetailsUrl = `https://pub.orcid.org/v3.0/${orcidId}/work/${workId}`;\n          const detailsResponse = await fetch(workDetailsUrl, { headers });\n  \n          if (detailsResponse.ok) {\n            const workDetails = await detailsResponse.json();\n  \n            const authors = workDetails.contributors?.contributor\n              ?.map((contributor) => contributor[\"credit-name\"]?.value)\n              .join(\", \") || \"No Authors\";\n  \n            publications.push({\n              title: workDetails.title?.title?.value || \"No Title\",\n              authors,\n              doi: workDetails.external-ids?.[\"external-id\"]?.find((id) => id[\"external-id-type\"] === \"doi\")?.[\"external-id-value\"] || \"\",\n              journal: workDetails[\"journal-title\"]?.value || \"No Journal\",\n              year: workDetails[\"publication-date\"]?.year?.value || \"No Year\",\n              volume: workDetails[\"volume\"] || \"\",\n              issue: workDetails[\"issue\"] || \"\",\n              pages: workDetails[\"page-range\"] || \"\",\n              abstract: workDetails[\"short-description\"] || \"\",\n              publisher: workDetails[\"publisher\"] || \"\",\n              keywords: workDetails[\"keywords\"]?.keyword?.map((kw) => kw.value).join(\", \") || \"\",\n            });\n          } else {\n            console.warn(`Failed to fetch details for work ID: ${workId}`);\n          }\n        }\n      }\n  \n      return publications;\n    } catch (error) {\n      console.error(\"Error fetching publications:\", error.message);\n      throw new Error(\"Failed to fetch publications. Please check the ORCID ID.\");\n    }\n  }\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}